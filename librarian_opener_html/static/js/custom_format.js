// Generated by CoffeeScript 1.10.0
(function(window, $, templates) {
  var frame, keepFormatting, patchStyle;
  templates._load('cssPatch');
  frame = $('#opener-html-main');
  keepFormatting = frame.data('keep-formatting');
  if (!keepFormatting) {
    return;
  }
  patchStyle = function() {
    var embeddedPage, head;
    embeddedPage = frame.contents();
    head = embeddedPage.find('head');
    if (!head.length) {
      head = $('<head>');
      embeddedPage.prepend(head);
    }
    head.append(templates.cssPatch);
  };
  return frame.on('load', function() {
    if (frame.contents().prop('readyState') === 'complete') {
      return patchStyle();
    }
  });
})(this, this.jQuery, this.templates);
